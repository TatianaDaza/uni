<mxfile host="app.diagrams.net">
  <diagram id="vidasalud-er" name="Modelo E-R VidaSalud">
    <mxGraphModel dx="2000" dy="1200" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2000" pageHeight="1400" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Entidades -->
        <mxCell id="usuarios" value="Usuarios&#xa;PK: id&#xa;email, nombre, apellidos, password_hash, telefono, fecha_nacimiento, genero, direccion, documento_identidad, tipo_documento, rol_id (FK), activo, email_verificado, ultimo_login, created_at, updated_at" style="shape=rectangle;whiteSpace=wrap;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="100" y="100" width="280" height="180" as="geometry"/>
        </mxCell>

        <mxCell id="roles" value="Roles&#xa;PK: id&#xa;nombre, descripcion, permisos, activo, created_at, updated_at" style="shape=rectangle;whiteSpace=wrap;rounded=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="500" y="100" width="220" height="120" as="geometry"/>
        </mxCell>

        <mxCell id="pacientes" value="Pacientes&#xa;PK: id&#xa;usuario_id (FK), tipo_sangre, alergias, enfermedades_cronicas, medicamentos_actuales, contacto_emergencia, seguro_medico, numero_seguro, created_at, updated_at" style="shape=rectangle;whiteSpace=wrap;rounded=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="100" y="350" width="280" height="160" as="geometry"/>
        </mxCell>

        <mxCell id="medicos" value="Medicos&#xa;PK: id&#xa;usuario_id (FK), especialidad_id (FK), numero_licencia, universidad, anos_experiencia, biografia, precio_consulta, calificacion_promedio, total_consultas, disponible, created_at, updated_at" style="shape=rectangle;whiteSpace=wrap;rounded=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="500" y="350" width="300" height="180" as="geometry"/>
        </mxCell>

        <mxCell id="especialidades" value="Especialidades&#xa;PK: id&#xa;nombre, descripcion, duracion_cita_default, precio_base, activo, created_at, updated_at" style="shape=rectangle;whiteSpace=wrap;rounded=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="900" y="350" width="250" height="140" as="geometry"/>
        </mxCell>

        <mxCell id="consultorios" value="Consultorios&#xa;PK: id&#xa;nombre, descripcion, ubicacion, capacidad, equipamiento, activo, created_at, updated_at" style="shape=rectangle;whiteSpace=wrap;rounded=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="900" y="600" width="260" height="140" as="geometry"/>
        </mxCell>

        <mxCell id="horarios" value="Horarios_atencion&#xa;PK: id&#xa;medico_id (FK), consultorio_id (FK), dia_semana, hora_inicio, hora_fin, duracion_cita, activo, created_at, updated_at" style="shape=rectangle;whiteSpace=wrap;rounded=1;fillColor=#cce5ff;strokeColor=#5b9bd5;" vertex="1" parent="1">
          <mxGeometry x="500" y="600" width="280" height="160" as="geometry"/>
        </mxCell>

        <mxCell id="citas" value="Citas&#xa;PK: id&#xa;paciente_id (FK), medico_id (FK), consultorio_id (FK), estado_id (FK), fecha, hora_inicio, hora_fin, motivo_consulta, diagnostico, tratamiento, precio, pagado, recordatorio_enviado, created_at, updated_at" style="shape=rectangle;whiteSpace=wrap;rounded=1;fillColor=#e6f2ff;strokeColor=#4a7ebb;" vertex="1" parent="1">
          <mxGeometry x="100" y="600" width="320" height="200" as="geometry"/>
        </mxCell>

        <mxCell id="estados" value="Estados_cita&#xa;PK: id&#xa;nombre, descripcion, color, created_at" style="shape=rectangle;whiteSpace=wrap;rounded=1;fillColor=#fdebd0;strokeColor=#e67e22;" vertex="1" parent="1">
          <mxGeometry x="100" y="850" width="220" height="120" as="geometry"/>
        </mxCell>

        <mxCell id="historial" value="Historiales_medicos&#xa;PK: id&#xa;paciente_id (FK), cita_id (FK), diagnostico, tratamiento, medicamentos, examenes, observaciones, created_at, updated_at" style="shape=rectangle;whiteSpace=wrap;rounded=1;fillColor=#d9ead3;strokeColor=#6aa84f;" vertex="1" parent="1">
          <mxGeometry x="500" y="850" width="280" height="160" as="geometry"/>
        </mxCell>

        <mxCell id="calificaciones" value="Calificaciones&#xa;PK: id&#xa;cita_id (FK), paciente_id (FK), medico_id (FK), calificacion, comentario, created_at" style="shape=rectangle;whiteSpace=wrap;rounded=1;fillColor=#fce5cd;strokeColor=#e69138;" vertex="1" parent="1">
          <mxGeometry x="900" y="850" width="260" height="140" as="geometry"/>
        </mxCell>

        <mxCell id="notificaciones" value="Notificaciones&#xa;PK: id&#xa;usuario_id (FK), cita_id (FK), mensaje, tipo, leida, created_at" style="shape=rectangle;whiteSpace=wrap;rounded=1;fillColor=#f4cccc;strokeColor=#cc0000;" vertex="1" parent="1">
          <mxGeometry x="1300" y="600" width="260" height="140" as="geometry"/>
        </mxCell>

        <!-- Relaciones -->
        <mxCell id="rel1" edge="1" parent="1" source="usuarios" target="roles" value="N:1" style="endArrow=block;endFill=1;strokeColor=#000000;"/>
        <mxCell id="rel2" edge="1" parent="1" source="usuarios" target="pacientes" value="1:1" style="endArrow=block;endFill=1;strokeColor=#000000;"/>
        <mxCell id="rel3" edge="1" parent="1" source="usuarios" target="medicos" value="1:1" style="endArrow=block;endFill=1;strokeColor=#000000;"/>
        <mxCell id="rel4" edge="1" parent="1" source="medicos" target="especialidades" value="N:1" style="endArrow=block;endFill=1;strokeColor=#000000;"/>
        <mxCell id="rel5" edge="1" parent="1" source="medicos" target="horarios" value="1:N" style="endArrow=block;endFill=1;strokeColor=#000000;"/>
        <mxCell id="rel6" edge="1" parent="1" source="consultorios" target="horarios" value="1:N" style="endArrow=block;endFill=1;strokeColor=#000000;"/>
        <mxCell id="rel7" edge="1" parent="1" source="pacientes" target="citas" value="1:N" style="endArrow=block;endFill=1;strokeColor=#000000;"/>
        <mxCell id="rel8" edge="1" parent="1" source="medicos" target="citas" value="1:N" style="endArrow=block;endFill=1;strokeColor=#000000;"/>
        <mxCell id="rel9" edge="1" parent="1" source="consultorios" target="citas" value="1:N" style="endArrow=block;endFill=1;strokeColor=#000000;"/>
        <mxCell id="rel10" edge="1" parent="1" source="estados" target="citas" value="1:N" style="endArrow=block;endFill=1;strokeColor=#000000;"/>
        <mxCell id="rel11" edge="1" parent="1" source="citas" target="historial" value="1:1" style="endArrow=block;endFill=1;strokeColor=#000000;"/>
        <mxCell id="rel12" edge="1" parent="1" source="citas" target="calificaciones" value="1:1" style="endArrow=block;endFill=1;strokeColor=#000000;"/>
        <mxCell id="rel13" edge="1" parent="1" source="usuarios" target="notificaciones" value="1:N" style="endArrow=block;endFill=1;strokeColor=#000000;"/>
        <mxCell id="rel14" edge="1" parent="1" source="citas" target="notificaciones" value="1:N" style="endArrow=block;endFill=1;strokeColor=#000000;"/>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
